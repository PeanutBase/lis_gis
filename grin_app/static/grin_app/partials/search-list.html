<span ng-if="model.geoJson.updating">
  <img src="/static/grin_app/images/ajax-loader.gif"></img>
  Loading...
</span>

<div class="alert alert-warning"
     style="margin-top: 0.5rem"
     ng-if="! model.geoJson.updating && ! model.geoJson.data.length">

  <span ng-if="model.geoJson.taxonQuery && model.geoJson.limitToMapExtent">
    <strong>{{model.geoJson.taxonQuery}}</strong> :
    No results found for this query, within the current map extent.
  </span>
  <span ng-if="model.geoJson.taxonQuery && ! model.geoJson.limitToMapExtent">
    <strong>{{model.geoJson.taxonQuery}}</strong> : 
    No results found for this query.
  </span>
  <span ng-if="! model.geoJson.taxonQuery">
    No results found within the current map extent. Try zooming
    out, or view a different region.
  </span>
</div>

<div class="alert alert-warning" style="margin-top: 0.5rem"
     ng-if="! model.geoJson.updating && model.geoJson.data.length === model.geoJson.maxRecs">
  <strong>Results: {{model.geoJson.data.length}}</strong>
  {{model.geoJson.explainResults()}}
</div>

<div style="margin-top: 0.5rem"
     ng-if="! model.geoJson.updating && model.geoJson.data.length !== model.geoJson.maxRecs">
  <strong>Results:
    {{model.geoJson.data.length}}
  </strong>
</div>

<div style="margin-top: 0.5rem"
     ng-if="! model.geoJson.updating && model.geoJson.data.length">
  <table class="table table-striped">
    <tr>
      <th>accession</th>
      <th>taxon</th>
      <th class="nowrap">crop name</th>
      <th>country</th>
      <th><!-- column having a map marker icon, if geocoded --></th>
      <th>collection site</th>
      <th>date</th>
      <th>elev&nbsp;(m.)</th>
    </tr>
    <tr ng-repeat="rec in model.geoJson.data">
      <td class="nowrap">
	<button class="btn btn-xs btn-default"
		ng-click="onAccessionDetail(rec.properties.accenumb)">
	  {{rec.properties.accenumb}}
	</button>
      </td>
      <td class="nowrap">
	<span class="badge"
	      style="background-color: {{ model.geoJson.colorFeature(rec)}};">
	  &nbsp;
	</span>
	<span ng-bind-html="rec.properties.taxon | highlight: model.searchHilite">
	</span>
      </td>
      <td class="nowrap"
	  ng-bind-html="rec.properties.cropname"></td>
      <td class="nowrap">{{rec.properties.origcty}}</td>
      <td><span ng-if="rec.geometry.coordinates"
		class="glyphicon glyphicon-map-marker"
		aria-hidden="true"></span>
      </td>
      
      <td ng-bind-html="rec.properties.collsite">
      </td>
      <td class="nowrap">{{rec.properties.colldate}}</td>
      <td class="nowrap">
	<span ng-if="rec.properties.elevation">
	  {{rec.properties.elevation | number }}
	</span>
      </td>
    </tr>
  </table>
</div>

<script type="text/ng-template"
	id="accession-modal-content.html">
  <div class="modal-header">
    <h3 class="modal-title">
      Accession: {{acc.properties.accenumb}}
      <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
    </h3>
  </div>
  <div class="modal-body">
    <table class="table table-striped">
      <tr ng-repeat="(k,v) in acc.properties">
	<td ng-bind-html="k"></td>
	<td ng-bind-html="v"></td>
      </tr>
    </table>
  </div>
  <div class="modal-footer">
    <button class="btn btn-primary" type="button" ng-click="ok()">OK</button>
  </div>
</script>
